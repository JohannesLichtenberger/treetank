<?xml version="1.0"?>
<project name="TreeTank" default="jar">

    <property name="treetank.jar" value="treetank__V1.0.jar"/>

    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.5"/>
    <property name="source" value="1.5"/>

    <property name="src.dir" value="src"/>
	  <property name="bench.dir" value="bench"/>

    <property name="classes.dir" value="generated/ant"/>
    <property name="externals.dir" value="externals"/>
    <property name="build.dir" value="generated"/>
    <property name="classpath" value="ant-classes"/>

    <description> Ant build of the TreeTank project. </description>

    <target name="init" description="Initialize build directory and classpath.">

        <mkdir dir="${classes.dir}"/>

        <path id="jarset">
            <pathelement location="${externals.dir}/commons-logging__V1.0.4.jar"/>
            <pathelement location="${externals.dir}/commons-logging-api__V1.0.4.jar"/>
            <pathelement location="${externals.dir}/log4j__V1.2.14.jar"/>
            <pathelement location="${externals.dir}/saxon8-xpath__V8.9.jar"/>
            <pathelement location="${externals.dir}/saxon8-xqj__V8.9.jar"/>
            <pathelement location="${externals.dir}/saxon8__V8.9.jar"/>
            <pathelement location="${externals.dir}/cocoon__V2.1.10.jar"/>
            <pathelement location="${externals.dir}/avalon-framework-api__V4.3.jar"/>
            <pathelement location="${externals.dir}/excalibur-pool-api__V2.1.jar"/>
        	  <pathelement location="${externals.dir}/excalibur-xmlutil__V2.1.jar"/>
            <pathelement location="${externals.dir}/commons-lang__V2.2.jar"/>
        	  <pathelement location="${externals.dir}/Perfidix__V2.0.0.jar"/>
      	    <pathelement location="${externals.dir}/commons-httpclient__V3.0.1.jar"/>
          	<pathelement location="${externals.dir}/commons-codec__V1.3.jar"/>
        	  <pathelement location="${externals.dir}/wstx-asl__V3.1.1.jar"/>
        	  <pathelement location="${externals.dir}/stax-api__V1.0.1.jar"/>
        </path>

    </target>

    <target name="compile" depends="init" description="Build treetank.">
        <javac srcdir="${src.dir}" destdir="${classes.dir}">
            <classpath refid="jarset"/>
        </javac>
    		<!--<javac srcdir="${bench.dir}" destdir="${classes.dir}">
    	            <classpath refid="jarset"/>
    	        </javac>-->
    </target>

    <target name="jar" depends="compile" description="Build treetank JAR.">
        <jar destfile="${externals.dir}/${treetank.jar}" basedir="${classes.dir}" update="true">
            <fileset dir="${classes.dir}" includes="**/*.class" id="classes"/>
        </jar>
    </target>

    <target name="clean">
        <delete dir="${classes.dir}"/>
        <delete file="${build.dir}/${treetank.jar}"/>
    </target>
    
    <target name="cocoon" depends="jar" description="Deploy jar file to cocoon webapps lib.">
        <copy file="${externals.dir}/${treetank.jar}" todir="/Users/marc/Desktop/cocoon-2.1.10/build/webapp/WEB-INF/lib"/>
    </target>

</project>
